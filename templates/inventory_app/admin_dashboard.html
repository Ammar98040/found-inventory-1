<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„ - Ù‚Ù„Ø¨ Ø§Ù„Ø¹Ø±Ø¨</title>
    {% load static %}
    <link rel="icon" type="image/svg+xml" href="{% static 'img/favicon.svg' %}">
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
    <link rel="stylesheet" href="{% static 'css/sidebar.css' %}">
    <style>
        .dashboard-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            border-radius: 15px;
            margin-bottom: 30px;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .stat-card {
            background: white;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            text-align: center;
        }
        
        .stat-card .stat-value {
            font-size: 36px;
            font-weight: bold;
            color: #667eea;
            margin: 10px 0;
        }
        
        .stat-card .stat-label {
            color: #666;
            font-size: 14px;
        }
        
        .staff-table {
            background: white;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .staff-table table {
            width: 100%;
            border-collapse: collapse;
        }
        
        .staff-table th {
            background: #667eea;
            color: white;
            padding: 15px;
            text-align: right;
            font-weight: bold;
        }
        
        .staff-table td {
            padding: 15px;
            border-bottom: 1px solid #eee;
        }
        
        .staff-table tr:hover {
            background: #f9f9f9;
        }
        
        .activity-badge {
            display: inline-block;
            padding: 5px 10px;
            background: #10b981;
            color: white;
            border-radius: 20px;
            font-size: 12px;
            font-weight: bold;
        }
        
        .recent-logs {
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            max-height: 400px;
            overflow-y: auto;
        }
        
        .log-item {
            padding: 10px;
            border-bottom: 1px solid #eee;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .log-item:last-child {
            border-bottom: none;
        }
        
        .btn-create {
            background: #10b981;
            color: white;
            padding: 10px 20px;
            border-radius: 8px;
            text-decoration: none;
            display: inline-block;
            margin-bottom: 20px;
        }
        
        .btn-create:hover {
            background: #059669;
        }
        
        /* Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª */
        .action-btn-small {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 5px;
            transition: all 0.2s ease;
            white-space: nowrap;
        }
        
        .action-btn-small .btn-text {
            display: inline;
        }
        
        .action-btn-small .btn-icon {
            display: inline;
        }
        
        /* ØªØµÙ…ÙŠÙ… Ù…ØªØ¬Ø§ÙˆØ¨ Ù„Ù„Ø´Ø§Ø´Ø§Øª Ø§Ù„ØµØºÙŠØ±Ø© */
        @media screen and (max-width: 768px) {
            .staff-table {
                overflow-x: auto;
                -webkit-overflow-scrolling: touch;
            }
            
            .staff-table table {
                min-width: 800px;
            }
            
            .staff-table th,
            .staff-table td {
                padding: 10px 8px;
                font-size: 13px;
            }
            
            /* Ø¥Ø®ÙØ§Ø¡ Ø¨Ø¹Ø¶ Ø§Ù„Ø£Ø¹Ù…Ø¯Ø© ÙÙŠ Ø§Ù„Ø´Ø§Ø´Ø§Øª Ø§Ù„ØµØºÙŠØ±Ø© */
            .staff-table th:nth-child(3),
            .staff-table td:nth-child(3),
            .staff-table th:nth-child(4),
            .staff-table td:nth-child(4) {
                display: none;
            }
            
            /* Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ù†ØµÙˆØµ Ù…Ù† Ø§Ù„Ø£Ø²Ø±Ø§Ø± ÙˆØ¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø§Øª ÙÙ‚Ø· */
            .action-btn-small .btn-text {
                display: none;
            }
            
            .action-btn-small {
                min-width: 36px;
                width: 36px;
                height: 36px;
                padding: 8px;
                border-radius: 8px;
                font-size: 16px;
            }
            
            .action-btn-small .btn-icon {
                margin: 0;
            }
            
            /* ØªØ­Ø³ÙŠÙ† Ø¹Ø±Ø¶ Ø§Ù„Ø¹Ù†ÙˆØ§Ù† ÙˆØ§Ù„Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ÙØ±Ø¹ÙŠ */
            .dashboard-header h1 {
                font-size: 24px;
            }
            
            .dashboard-header p {
                font-size: 14px;
            }
            
            /* ØªØ­Ø³ÙŠÙ† Ø§Ù„Ø´Ø¨ÙƒØ© Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ© */
            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 15px;
            }
            
            .stat-card .stat-value {
                font-size: 28px;
            }
            
            /* ØªØ­Ø³ÙŠÙ† Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© */
            h2 {
                font-size: 18px;
            }
            
            .btn-create {
                padding: 8px 16px;
                font-size: 13px;
            }
        }
        
        @media screen and (max-width: 480px) {
            .staff-table th,
            .staff-table td {
                padding: 8px 5px;
                font-size: 12px;
            }
            
            /* Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ù…Ø²ÙŠØ¯ Ù…Ù† Ø§Ù„Ø£Ø¹Ù…Ø¯Ø© ÙÙŠ Ø§Ù„Ø´Ø§Ø´Ø§Øª Ø§Ù„ØµØºÙŠØ±Ø© Ø¬Ø¯Ø§Ù‹ */
            .staff-table th:nth-child(5),
            .staff-table td:nth-child(5),
            .staff-table th:nth-child(6),
            .staff-table td:nth-child(6) {
                display: none;
            }
            
            .action-btn-small {
                min-width: 32px;
                width: 32px;
                height: 32px;
                padding: 6px;
                font-size: 14px;
            }
            
            .stats-grid {
                grid-template-columns: 1fr;
            }
            
            .dashboard-header {
                padding: 20px;
            }
            
            .dashboard-header h1 {
                font-size: 20px;
            }
            
            /* ØªØ­Ø³ÙŠÙ† Ù‚Ø³Ù… Ø§Ù„ØªÙØ§ØµÙŠÙ„ ÙÙŠ Ø§Ù„Ø´Ø§Ø´Ø§Øª Ø§Ù„ØµØºÙŠØ±Ø© */
            .staff-details-row td {
                padding: 15px !important;
            }
            
            .staff-details-row h3 {
                font-size: 16px;
            }
            
            .staff-details-row table {
                font-size: 11px;
            }
            
            .staff-details-row th,
            .staff-details-row td {
                padding: 6px 4px;
            }
        }
        
        /* ØªØ­Ø³ÙŠÙ†Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ© Ù„Ù„Ø´Ø§Ø´Ø§Øª Ø§Ù„Ù…ØªÙˆØ³Ø·Ø© */
        @media screen and (max-width: 992px) and (min-width: 769px) {
            .staff-table th,
            .staff-table td {
                padding: 12px 10px;
                font-size: 13px;
            }
        }
    </style>
</head>
<body>
    <button id="sidebar-toggle" onclick="toggleSidebar()">â˜°</button>
    <div id="sidebar-overlay" onclick="toggleSidebar()"></div>
    <div id="main-sidebar">
        <div class="sidebar-header">
            <h2>ğŸ§­ Ø§Ù„Ù‚ÙˆØ§Ø¦Ù…</h2>
            <button class="sidebar-close" onclick="toggleSidebar()">Ã—</button>
        </div>
        <div class="sidebar-content">
            <div class="sidebar-section">
                <div class="sidebar-title">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</div>
                <a href="{% url 'inventory_app:home' %}" class="sidebar-link">
                    <span class="icon">ğŸ”</span>
                    <span class="text">Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª</span>
                </a>
                <a href="{% url 'inventory_app:dashboard' %}" class="sidebar-link">
                    <span class="icon">ğŸ“Š</span>
                    <span class="text">Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</span>
                </a>
                <a href="{% url 'inventory_app:admin_dashboard' %}" class="sidebar-link active">
                    <span class="icon">ğŸ›ï¸</span>
                    <span class="text">Ù„ÙˆØ­Ø© Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„</span>
                </a>
            </div>
            
            <div class="sidebar-section">
                <div class="sidebar-title">Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª</div>
                <a href="{% url 'inventory_app:products_list' %}" class="sidebar-link">
                    <span class="icon">ğŸ“¦</span>
                    <span class="text">Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª</span>
                </a>
                <a href="{% url 'inventory_app:product_add' %}" class="sidebar-link">
                    <span class="icon">â•</span>
                    <span class="text">Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬ Ø¬Ø¯ÙŠØ¯</span>
                </a>
            </div>
            
            <div class="sidebar-section">
                <div class="sidebar-title">Ø§Ù„Ù…Ø³ØªÙˆØ¯Ø¹</div>
                <a href="{% url 'inventory_app:manage_warehouse' %}" class="sidebar-link">
                    <span class="icon">âš™ï¸</span>
                    <span class="text">Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø³ØªÙˆØ¯Ø¹</span>
                </a>
                <a href="{% url 'inventory_app:locations_list' %}" class="sidebar-link">
                    <span class="icon">ğŸ“</span>
                    <span class="text">Ø§Ù„Ø£Ù…Ø§ÙƒÙ†</span>
                </a>
            </div>
            
            <div class="sidebar-section">
                <div class="sidebar-title">Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†</div>
                <a href="{% url 'inventory_app:register_staff' %}" class="sidebar-link">
                    <span class="icon">ğŸ‘¤</span>
                    <span class="text">Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨ Ù…ÙˆØ¸Ù</span>
                </a>
            </div>
            
            <div class="sidebar-section">
                <div class="sidebar-title">Ø§Ù„Ø³Ø¬Ù„Ø§Øª</div>
                <a href="{% url 'inventory_app:audit_logs' %}" class="sidebar-link">
                    <span class="icon">ğŸ“‹</span>
                    <span class="text">Ø³Ø¬Ù„Ø§Øª Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª</span>
                </a>
            </div>
            
            
            
            <div class="sidebar-section">
                <div class="sidebar-title">Ø§Ù„ØµÙŠØ§Ù†Ø©</div>
                <a href="{% url 'inventory_app:backup_restore' %}" class="sidebar-link">
                    <span class="icon">ğŸ’¾</span>
                    <span class="text">Ø§Ù„Ù†Ø³Ø® Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠ</span>
                </a>
                <a href="{% url 'inventory_app:data_deletion' %}" class="sidebar-link">
                    <span class="icon">ğŸ—‘ï¸</span>
                    <span class="text">Ø­Ø°Ù Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</span>
                </a>
            </div>
            
            <div class="sidebar-section">
                <div class="sidebar-title">Ø§Ù„Ø·Ù€Ù„Ø¨Ø§Øª</div>
                <a href="{% url 'inventory_app:orders_list' %}" class="sidebar-link">
                    <span class="icon">ğŸ“‹</span>
                    <span class="text">Ø³Ø¬Ù„ Ø§Ù„Ø·Ù„Ø¨Ø§Øª</span>
                </a>
            </div>
            
            <div class="sidebar-section">
                <a href="/logout/" class="sidebar-link" style="color: #ef4444;">
                    <span class="icon">ğŸšª</span>
                    <span class="text">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬</span>
                </a>
            </div>
        </div>
    </div>
    <div class="container">
        <div class="dashboard-header">
            <h1>ğŸ›ï¸ Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„</h1>
            <p>ØªØªØ¨Ø¹ Ø´Ø§Ù…Ù„ Ù„Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ† ÙˆØ§Ù„Ø£Ù†Ø´Ø·Ø©</p>
        </div>
        
        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-label">Ø¹Ø¯Ø¯ Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ†</div>
                <div class="stat-value">{{ total_staff }}</div>
            </div>
            <div class="stat-card">
                <div class="stat-label">Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„ÙŠÙ†</div>
                <div class="stat-value">{{ total_admins }}</div>
            </div>
            <div class="stat-card">
                <div class="stat-label">Ø£Ù†Ø´Ø·Ø© Ø§Ù„ÙŠÙˆÙ…</div>
                <div class="stat-value">{{ today_activities }}</div>
            </div>
            <div class="stat-card">
                <div class="stat-label">Ø£Ù†Ø´Ø·Ø© Ø¢Ø®Ø± 7 Ø£ÙŠØ§Ù…</div>
                <div class="stat-value">{{ recent_activities }}</div>
            </div>
        </div>
        
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; flex-wrap: wrap; gap: 15px;">
            <h2 style="margin: 0;">ğŸ‘¥ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ†</h2>
            <a href="{% url 'inventory_app:register_staff' %}" class="btn-create">â• Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨ Ù…ÙˆØ¸Ù Ø¬Ø¯ÙŠØ¯</a>
        </div>
        
        <div class="staff-table">
            <table>
                <thead>
                    <tr>
                        <th>Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…</th>
                        <th>Ø§Ù„Ù†ÙˆØ¹</th>
                        <th>Ø£Ù†Ø´Ø·Ø© Ø§Ù„ÙŠÙˆÙ…</th>
                        <th>Ø£Ù†Ø´Ø·Ø© Ø¢Ø®Ø± 7 Ø£ÙŠØ§Ù…</th>
                        <th>Ø¢Ø®Ø± Ù†Ø´Ø§Ø·</th>
                        <th>Ø¢Ø®Ø± IP</th>
                        <th>Ø§Ù„Ø­Ø§Ù„Ø©</th>
                        <th>Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>
                    </tr>
                </thead>
                <tbody>
                    {% for member in staff_members %}
                    <tr class="staff-main-row" data-user-id="{{ member.user.id }}" style="cursor: pointer;">
                        <td><strong>{{ member.user.username }}</strong></td>
                        <td>{{ member.profile.get_user_type_display }}</td>
                        <td>
                            <span class="activity-badge">{{ member.today_activities }}</span>
                        </td>
                        <td>{{ member.week_activities }}</td>
                        <td>
                            {% if member.last_activity %}
                                {{ member.last_activity.created_at|date:"Y-m-d H:i" }}
                            {% else %}
                                <span style="color: #999;">Ù„Ø§ ÙŠÙˆØ¬Ø¯</span>
                            {% endif %}
                        </td>
                        <td>
                            <span style="color: #666; font-family: monospace;">{{ member.last_login_ip|default:"-" }}</span>
                        </td>
                        <td>
                            {% if member.profile.is_active %}
                                <span style="color: #10b981;">âœ… Ù†Ø´Ø·</span>
                            {% else %}
                                <span style="color: #ef4444;">âŒ Ù…Ø¹Ø·Ù„</span>
                            {% endif %}
                        </td>
                        <td>
                            <div style="display: flex; gap: 8px; flex-wrap: wrap;">
                                <a href="{% url 'inventory_app:view_staff' member.user.id %}" 
                                   class="action-btn-small" 
                                   title="Ø¹Ø±Ø¶ ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…ÙˆØ¸Ù"
                                   style="background: #3b82f6; color: white; padding: 5px 12px; border-radius: 6px; text-decoration: none; font-size: 12px;">
                                    <span class="btn-icon">ğŸ‘ï¸</span>
                                    <span class="btn-text">Ø¹Ø±Ø¶</span>
                                </a>
                                <a href="{% url 'inventory_app:edit_staff' member.user.id %}" 
                                   class="action-btn-small" 
                                   title="ØªØ¹Ø¯ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…ÙˆØ¸Ù"
                                   style="background: #10b981; color: white; padding: 5px 12px; border-radius: 6px; text-decoration: none; font-size: 12px;">
                                    <span class="btn-icon">âœï¸</span>
                                    <span class="btn-text">ØªØ¹Ø¯ÙŠÙ„</span>
                                </a>
                                {% if member.profile.is_active %}
                                <button type="button"
                                        data-user-id="{{ member.user.id }}"
                                        data-is-active="true"
                                        class="action-btn-small toggle-active-btn"
                                        title="ØªØ¹Ø·ÙŠÙ„ Ø§Ù„Ù…ÙˆØ¸Ù"
                                        style="background: #f59e0b; color: white; padding: 5px 12px; border-radius: 6px; border: none; cursor: pointer; font-size: 12px;">
                                    <span class="btn-icon">â¸ï¸</span>
                                    <span class="btn-text">ØªØ¹Ø·ÙŠÙ„</span>
                                </button>
                                {% else %}
                                <button type="button"
                                        data-user-id="{{ member.user.id }}"
                                        data-is-active="false"
                                        class="action-btn-small toggle-active-btn"
                                        title="ØªÙØ¹ÙŠÙ„ Ø§Ù„Ù…ÙˆØ¸Ù"
                                        style="background: #10b981; color: white; padding: 5px 12px; border-radius: 6px; border: none; cursor: pointer; font-size: 12px;">
                                    <span class="btn-icon">â–¶ï¸</span>
                                    <span class="btn-text">ØªÙØ¹ÙŠÙ„</span>
                                </button>
                                {% endif %}
                                <button type="button"
                                        data-user-id="{{ member.user.id }}"
                                        data-username="{{ member.user.username }}"
                                        class="action-btn-small delete-staff-btn"
                                        title="Ø­Ø°Ù Ø§Ù„Ù…ÙˆØ¸Ù"
                                        style="background: #ef4444; color: white; padding: 5px 12px; border-radius: 6px; border: none; cursor: pointer; font-size: 12px;">
                                    <span class="btn-icon">ğŸ—‘ï¸</span>
                                    <span class="btn-text">Ø­Ø°Ù</span>
                                </button>
                            </div>
                        </td>
                    </tr>
                    <!-- Ù‚Ø³Ù… ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª Ù„Ù„Ù…ÙˆØ¸Ù -->
                    <tr class="staff-details-row" data-user-id="{{ member.user.id }}" style="display: none;">
                        <td colspan="8" style="background: #f9fafb; padding: 20px;">
                            <div style="margin-bottom: 15px;">
                                <h3 style="margin: 0 0 15px 0; color: #667eea;">ğŸ‘¤ ØªÙØ§ØµÙŠÙ„ Ø¹Ù…Ù„ÙŠØ§Øª Ø§Ù„Ù…ÙˆØ¸Ù: {{ member.user.username }}</h3>
                                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 15px; margin-bottom: 20px;">
                                    <div style="background: white; padding: 15px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                                        <div style="font-size: 12px; color: #666; margin-bottom: 5px;">Ø¹Ù…Ù„ÙŠØ§Øª Ø§Ù„ÙŠÙˆÙ…</div>
                                        <div style="font-size: 24px; font-weight: bold; color: #667eea;">{{ member.today_operations }}</div>
                                    </div>
                                    <div style="background: white; padding: 15px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                                        <div style="font-size: 12px; color: #666; margin-bottom: 5px;">Ø¹Ù…Ù„ÙŠØ§Øª Ø¢Ø®Ø± 7 Ø£ÙŠØ§Ù…</div>
                                        <div style="font-size: 24px; font-weight: bold; color: #667eea;">{{ member.week_operations }}</div>
                                    </div>
                                    {% if member.last_operation %}
                                    <div style="background: white; padding: 15px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                                        <div style="font-size: 12px; color: #666; margin-bottom: 5px;">Ø¢Ø®Ø± Ø¹Ù…Ù„ÙŠØ©</div>
                                        <div style="font-size: 14px; font-weight: bold; color: #333;">{{ member.last_operation.created_at|date:"Y-m-d H:i" }}</div>
                                    </div>
                                    {% endif %}
                                </div>
                                
                                {% if member.operation_stats %}
                                <div style="margin-bottom: 20px;">
                                    <h4 style="margin: 0 0 10px 0; color: #333; font-size: 14px;">Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª:</h4>
                                    <div style="display: flex; flex-wrap: wrap; gap: 8px;">
                                        {% for op_name, count in member.operation_stats.items %}
                                        <span style="background: #667eea; color: white; padding: 5px 12px; border-radius: 15px; font-size: 12px;">
                                            {{ op_name }}: {{ count }}
                                        </span>
                                        {% endfor %}
                                    </div>
                                </div>
                                {% endif %}
                                
                                {% if member.recent_operations %}
                                <div>
                                    <h4 style="margin: 0 0 15px 0; color: #333; font-size: 14px;">Ø¢Ø®Ø± 10 Ø¹Ù…Ù„ÙŠØ§Øª:</h4>
                                    <div style="background: white; border-radius: 8px; overflow: hidden;">
                                        <table style="width: 100%; border-collapse: collapse; font-size: 12px;">
                                            <thead>
                                                <tr style="background: #667eea; color: white;">
                                                    <th style="padding: 10px; text-align: right;">Ø§Ù„ØªØ§Ø±ÙŠØ®</th>
                                                    <th style="padding: 10px; text-align: right;">Ø§Ù„Ù†ÙˆØ¹</th>
                                                    <th style="padding: 10px; text-align: right;">Ø±Ù‚Ù… Ø§Ù„Ù…Ù†ØªØ¬</th>
                                                    <th style="padding: 10px; text-align: right;">Ø§Ù„ÙƒÙ…ÙŠØ© Ù‚Ø¨Ù„</th>
                                                    <th style="padding: 10px; text-align: right;">Ø§Ù„ÙƒÙ…ÙŠØ© Ø¨Ø¹Ø¯</th>
                                                    <th style="padding: 10px; text-align: right;">Ù…Ù„Ø§Ø­Ø¸Ø§Øª</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                {% for op in member.recent_operations %}
                                                <tr style="border-bottom: 1px solid #eee;">
                                                    <td style="padding: 8px;">{{ op.created_at|date:"Y-m-d H:i" }}</td>
                                                    <td style="padding: 8px;">
                                                        {% if op.action == 'added' %}
                                                            <span style="background: #10b981; color: white; padding: 3px 8px; border-radius: 10px; font-size: 11px;">â• Ø¥Ø¶Ø§ÙØ©</span>
                                                        {% elif op.action == 'updated' %}
                                                            <span style="background: #f59e0b; color: white; padding: 3px 8px; border-radius: 10px; font-size: 11px;">âœï¸ ØªØ¹Ø¯ÙŠÙ„</span>
                                                        {% elif op.action == 'deleted' %}
                                                            <span style="background: #ef4444; color: white; padding: 3px 8px; border-radius: 10px; font-size: 11px;">ğŸ—‘ï¸ Ø­Ø°Ù</span>
                                                        {% elif op.action == 'quantity_taken' %}
                                                            <span style="background: #3b82f6; color: white; padding: 3px 8px; border-radius: 10px; font-size: 11px;">ğŸ“¤ Ø³Ø­Ø¨</span>
                                                        {% elif op.action == 'quantity_added' %}
                                                            <span style="background: #10b981; color: white; padding: 3px 8px; border-radius: 10px; font-size: 11px;">ğŸ“¥ Ø¥Ø¶Ø§ÙØ©</span>
                                                        {% elif op.action == 'location_assigned' %}
                                                            <span style="background: #8b5cf6; color: white; padding: 3px 8px; border-radius: 10px; font-size: 11px;">ğŸ“ Ø±Ø¨Ø·</span>
                                                        {% else %}
                                                            <span style="background: #6b7280; color: white; padding: 3px 8px; border-radius: 10px; font-size: 11px;">{{ op.get_action_display }}</span>
                                                        {% endif %}
                                                    </td>
                                                    <td style="padding: 8px; font-weight: bold;">{{ op.product_number }}</td>
                                                    <td style="padding: 8px;">{{ op.quantity_before|default:"-" }}</td>
                                                    <td style="padding: 8px;">{{ op.quantity_after|default:"-" }}</td>
                                                    <td style="padding: 8px; color: #666; font-size: 11px;">{{ op.notes|truncatewords:5|default:"-" }}</td>
                                                </tr>
                                                {% endfor %}
                                            </tbody>
                                        </table>
                                    </div>
                                    <div style="margin-top: 10px; text-align: left;">
                                        <a href="{% url 'inventory_app:view_staff' member.user.id %}" style="color: #667eea; text-decoration: none; font-size: 12px;">
                                            Ø¹Ø±Ø¶ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª â†
                                        </a>
                                    </div>
                                </div>
                                {% else %}
                                <div style="text-align: center; padding: 20px; color: #999;">
                                    Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¹Ù…Ù„ÙŠØ§Øª Ù…Ø³Ø¬Ù„Ø© Ù„Ù‡Ø°Ø§ Ø§Ù„Ù…ÙˆØ¸Ù
                                </div>
                                {% endif %}
                            </div>
                        </td>
                    </tr>
                    {% empty %}
                    <tr>
                        <td colspan="8" style="text-align: center; padding: 30px; color: #999;">
                            Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù…ÙˆØ¸ÙÙŠÙ† Ø¨Ø¹Ø¯
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
        
        <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 40px; margin-bottom: 20px; flex-wrap: wrap; gap: 15px;">
            <h2 style="margin: 0;">ğŸ‘¨â€ğŸ’¼ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„ÙŠÙ†</h2>
        </div>
        
        <div class="staff-table">
            <table>
                <thead>
                    <tr>
                        <th>Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…</th>
                        <th>Ø§Ù„Ù†ÙˆØ¹</th>
                        <th>Ø£Ù†Ø´Ø·Ø© Ø§Ù„ÙŠÙˆÙ…</th>
                        <th>Ø£Ù†Ø´Ø·Ø© Ø¢Ø®Ø± 7 Ø£ÙŠØ§Ù…</th>
                        <th>Ø¹Ù…Ù„ÙŠØ§Øª Ø§Ù„ÙŠÙˆÙ…</th>
                        <th>Ø¹Ù…Ù„ÙŠØ§Øª Ø¢Ø®Ø± 7 Ø£ÙŠØ§Ù…</th>
                        <th>Ø¢Ø®Ø± Ù†Ø´Ø§Ø·</th>
                        <th>Ø¢Ø®Ø± IP</th>
                        <th>Ø§Ù„Ø­Ø§Ù„Ø©</th>
                        <th>Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>
                    </tr>
                </thead>
                <tbody>
                    {% for admin in admin_members %}
                    <tr class="staff-main-row" data-user-id="{{ admin.user.id }}" style="cursor: pointer;">
                        <td><strong>{{ admin.user.username }}</strong></td>
                        <td>{{ admin.profile.get_user_type_display }}</td>
                        <td>
                            <span class="activity-badge">{{ admin.today_activities }}</span>
                        </td>
                        <td>{{ admin.week_activities }}</td>
                        <td>
                            <span class="activity-badge" style="background: #3b82f6;">{{ admin.today_operations }}</span>
                        </td>
                        <td>{{ admin.week_operations }}</td>
                        <td>
                            {% if admin.last_activity %}
                                {{ admin.last_activity.created_at|date:"Y-m-d H:i" }}
                            {% else %}
                                <span style="color: #999;">Ù„Ø§ ÙŠÙˆØ¬Ø¯</span>
                            {% endif %}
                        </td>
                        <td>
                            <span style="color: #666; font-family: monospace;">{{ admin.last_login_ip|default:"-" }}</span>
                        </td>
                        <td>
                            {% if admin.profile.is_active %}
                                <span style="color: #10b981;">âœ… Ù†Ø´Ø·</span>
                            {% else %}
                                <span style="color: #ef4444;">âŒ Ù…Ø¹Ø·Ù„</span>
                            {% endif %}
                        </td>
                        <td>
                            <div style="display: flex; gap: 8px; flex-wrap: wrap;">
                                <a href="{% url 'inventory_app:view_staff' admin.user.id %}" 
                                   class="action-btn-small" 
                                   title="Ø¹Ø±Ø¶ ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„"
                                   style="background: #3b82f6; color: white; padding: 5px 12px; border-radius: 6px; text-decoration: none; font-size: 12px;">
                                    <span class="btn-icon">ğŸ‘ï¸</span>
                                    <span class="btn-text">Ø¹Ø±Ø¶</span>
                                </a>
                                <a href="{% url 'inventory_app:edit_staff' admin.user.id %}" 
                                   class="action-btn-small" 
                                   title="ØªØ¹Ø¯ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„"
                                   style="background: #10b981; color: white; padding: 5px 12px; border-radius: 6px; text-decoration: none; font-size: 12px;">
                                    <span class="btn-icon">âœï¸</span>
                                    <span class="btn-text">ØªØ¹Ø¯ÙŠÙ„</span>
                                </a>
                                {% if admin.profile.is_active %}
                                <button type="button"
                                        data-user-id="{{ admin.user.id }}"
                                        data-is-active="true"
                                        class="action-btn-small toggle-active-btn"
                                        title="ØªØ¹Ø·ÙŠÙ„ Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„"
                                        style="background: #f59e0b; color: white; padding: 5px 12px; border-radius: 6px; border: none; cursor: pointer; font-size: 12px;">
                                    <span class="btn-icon">â¸ï¸</span>
                                    <span class="btn-text">ØªØ¹Ø·ÙŠÙ„</span>
                                </button>
                                {% else %}
                                <button type="button"
                                        data-user-id="{{ admin.user.id }}"
                                        data-is-active="false"
                                        class="action-btn-small toggle-active-btn"
                                        title="ØªÙØ¹ÙŠÙ„ Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„"
                                        style="background: #10b981; color: white; padding: 5px 12px; border-radius: 6px; border: none; cursor: pointer; font-size: 12px;">
                                    <span class="btn-icon">â–¶ï¸</span>
                                    <span class="btn-text">ØªÙØ¹ÙŠÙ„</span>
                                </button>
                                {% endif %}
                                {% if admin.user.id != request.user.id %}
                                <button type="button"
                                        data-user-id="{{ admin.user.id }}"
                                        data-username="{{ admin.user.username }}"
                                        class="action-btn-small delete-staff-btn"
                                        title="Ø­Ø°Ù Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„"
                                        style="background: #ef4444; color: white; padding: 5px 12px; border-radius: 6px; border: none; cursor: pointer; font-size: 12px;">
                                    <span class="btn-icon">ğŸ—‘ï¸</span>
                                    <span class="btn-text">Ø­Ø°Ù</span>
                                </button>
                                {% endif %}
                            </div>
                        </td>
                    </tr>
                    <!-- Ù‚Ø³Ù… ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª Ù„Ù„Ù…Ø³Ø¤ÙˆÙ„ -->
                    <tr class="staff-details-row" data-user-id="{{ admin.user.id }}" style="display: none;">
                        <td colspan="10" style="background: #f9fafb; padding: 20px;">
                            <div style="margin-bottom: 15px;">
                                <h3 style="margin: 0 0 15px 0; color: #667eea;">ğŸ‘¨â€ğŸ’¼ ØªÙØ§ØµÙŠÙ„ Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„: {{ admin.user.username }}</h3>
                                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 15px; margin-bottom: 20px;">
                                    <div style="background: white; padding: 15px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                                        <div style="font-size: 12px; color: #666; margin-bottom: 5px;">Ø£Ù†Ø´Ø·Ø© Ø§Ù„ÙŠÙˆÙ…</div>
                                        <div style="font-size: 24px; font-weight: bold; color: #667eea;">{{ admin.today_activities }}</div>
                                    </div>
                                    <div style="background: white; padding: 15px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                                        <div style="font-size: 12px; color: #666; margin-bottom: 5px;">Ø¹Ù…Ù„ÙŠØ§Øª Ø§Ù„ÙŠÙˆÙ…</div>
                                        <div style="font-size: 24px; font-weight: bold; color: #3b82f6;">{{ admin.today_operations }}</div>
                                    </div>
                                    <div style="background: white; padding: 15px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                                        <div style="font-size: 12px; color: #666; margin-bottom: 5px;">Ø¹Ù…Ù„ÙŠØ§Øª Ø¢Ø®Ø± 7 Ø£ÙŠØ§Ù…</div>
                                        <div style="font-size: 24px; font-weight: bold; color: #667eea;">{{ admin.week_operations }}</div>
                                    </div>
                                    {% if admin.last_operation %}
                                    <div style="background: white; padding: 15px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                                        <div style="font-size: 12px; color: #666; margin-bottom: 5px;">Ø¢Ø®Ø± Ø¹Ù…Ù„ÙŠØ©</div>
                                        <div style="font-size: 14px; font-weight: bold; color: #333;">{{ admin.last_operation.created_at|date:"Y-m-d H:i" }}</div>
                                    </div>
                                    {% endif %}
                                </div>
                                
                                {% if admin.operation_stats %}
                                <div style="margin-bottom: 20px;">
                                    <h4 style="margin: 0 0 10px 0; color: #333; font-size: 14px;">Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª Ø¹Ù„Ù‰ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª:</h4>
                                    <div style="display: flex; flex-wrap: wrap; gap: 8px;">
                                        {% for op_name, count in admin.operation_stats.items %}
                                        <span style="background: #667eea; color: white; padding: 5px 12px; border-radius: 15px; font-size: 12px;">
                                            {{ op_name }}: {{ count }}
                                        </span>
                                        {% endfor %}
                                    </div>
                                </div>
                                {% endif %}
                                
                                {% if admin.activity_stats %}
                                <div style="margin-bottom: 20px;">
                                    <h4 style="margin: 0 0 10px 0; color: #333; font-size: 14px;">Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ø£Ù†Ø´Ø·Ø©:</h4>
                                    <div style="display: flex; flex-wrap: wrap; gap: 8px;">
                                        {% for action_name, count in admin.activity_stats.items %}
                                        <span style="background: #10b981; color: white; padding: 5px 12px; border-radius: 15px; font-size: 12px;">
                                            {{ action_name }}: {{ count }}
                                        </span>
                                        {% endfor %}
                                    </div>
                                </div>
                                {% endif %}
                                
                                {% if admin.recent_operations %}
                                <div>
                                    <h4 style="margin: 0 0 15px 0; color: #333; font-size: 14px;">Ø¢Ø®Ø± 20 Ø¥Ø¬Ø±Ø§Ø¡ Ø¹Ù„Ù‰ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª:</h4>
                                    <div style="background: white; border-radius: 8px; overflow: hidden;">
                                        <table style="width: 100%; border-collapse: collapse; font-size: 12px;">
                                            <thead>
                                                <tr style="background: #667eea; color: white;">
                                                    <th style="padding: 10px; text-align: right;">Ø§Ù„ØªØ§Ø±ÙŠØ®</th>
                                                    <th style="padding: 10px; text-align: right;">Ø§Ù„Ù†ÙˆØ¹</th>
                                                    <th style="padding: 10px; text-align: right;">Ø±Ù‚Ù… Ø§Ù„Ù…Ù†ØªØ¬</th>
                                                    <th style="padding: 10px; text-align: right;">Ø§Ù„ÙƒÙ…ÙŠØ© Ù‚Ø¨Ù„</th>
                                                    <th style="padding: 10px; text-align: right;">Ø§Ù„ÙƒÙ…ÙŠØ© Ø¨Ø¹Ø¯</th>
                                                    <th style="padding: 10px; text-align: right;">Ù…Ù„Ø§Ø­Ø¸Ø§Øª</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                {% for op in admin.recent_operations %}
                                                <tr style="border-bottom: 1px solid #eee;">
                                                    <td style="padding: 8px;">{{ op.created_at|date:"Y-m-d H:i" }}</td>
                                                    <td style="padding: 8px;">
                                                        {% if op.action == 'added' %}
                                                            <span style="background: #10b981; color: white; padding: 3px 8px; border-radius: 10px; font-size: 11px;">â• Ø¥Ø¶Ø§ÙØ©</span>
                                                        {% elif op.action == 'updated' %}
                                                            <span style="background: #f59e0b; color: white; padding: 3px 8px; border-radius: 10px; font-size: 11px;">âœï¸ ØªØ¹Ø¯ÙŠÙ„</span>
                                                        {% elif op.action == 'deleted' %}
                                                            <span style="background: #ef4444; color: white; padding: 3px 8px; border-radius: 10px; font-size: 11px;">ğŸ—‘ï¸ Ø­Ø°Ù</span>
                                                        {% elif op.action == 'quantity_taken' %}
                                                            <span style="background: #3b82f6; color: white; padding: 3px 8px; border-radius: 10px; font-size: 11px;">ğŸ“¤ Ø³Ø­Ø¨</span>
                                                        {% elif op.action == 'quantity_added' %}
                                                            <span style="background: #10b981; color: white; padding: 3px 8px; border-radius: 10px; font-size: 11px;">ğŸ“¥ Ø¥Ø±Ø¬Ø§Ø¹</span>
                                                        {% elif op.action == 'location_assigned' %}
                                                            <span style="background: #8b5cf6; color: white; padding: 3px 8px; border-radius: 10px; font-size: 11px;">ğŸ“ Ø±Ø¨Ø·</span>
                                                        {% else %}
                                                            <span style="background: #6b7280; color: white; padding: 3px 8px; border-radius: 10px; font-size: 11px;">{{ op.get_action_display }}</span>
                                                        {% endif %}
                                                    </td>
                                                    <td style="padding: 8px; font-weight: bold;">{{ op.product_number }}</td>
                                                    <td style="padding: 8px;">{{ op.quantity_before|default:"-" }}</td>
                                                    <td style="padding: 8px;">{{ op.quantity_after|default:"-" }}</td>
                                                    <td style="padding: 8px; color: #666; font-size: 11px;">{{ op.notes|truncatewords:5|default:"-" }}</td>
                                                </tr>
                                                {% endfor %}
                                            </tbody>
                                        </table>
                                    </div>
                                    <div style="margin-top: 10px; text-align: left;">
                                        <a href="{% url 'inventory_app:view_staff' admin.user.id %}" style="color: #667eea; text-decoration: none; font-size: 12px;">
                                            Ø¹Ø±Ø¶ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª â†
                                        </a>
                                    </div>
                                </div>
                                {% else %}
                                <div style="text-align: center; padding: 20px; color: #999;">
                                    Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª Ù…Ø³Ø¬Ù„Ø© Ù„Ù‡Ø°Ø§ Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„
                                </div>
                                {% endif %}
                            </div>
                        </td>
                    </tr>
                    {% empty %}
                    <tr>
                        <td colspan="10" style="text-align: center; padding: 30px; color: #999;">
                            Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù…Ø³Ø¤ÙˆÙ„ÙŠÙ† Ø¨Ø¹Ø¯
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
        
        <h2 style="margin-top: 30px; margin-bottom: 20px;">ğŸ“‹ Ø¢Ø®Ø± Ø§Ù„Ø£Ù†Ø´Ø·Ø©</h2>
        <div class="recent-logs">
            {% for log in recent_logs %}
            <div class="log-item">
                <div>
                    <strong>{{ log.user.username }}</strong> - 
                    {{ log.get_action_display }} - 
                    <span style="color: #666;">{{ log.description }}</span>
                </div>
                <div style="color: #999; font-size: 12px;">
                    {{ log.created_at|date:"Y-m-d H:i" }}
                </div>
            </div>
            {% empty %}
            <div style="text-align: center; padding: 30px; color: #999;">
                Ù„Ø§ ØªÙˆØ¬Ø¯ Ø£Ù†Ø´Ø·Ø© Ù…Ø³Ø¬Ù„Ø©
            </div>
            {% endfor %}
        </div>
        
        <div style="margin-top: 30px;">
            <h2>ğŸ“Š Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ø£Ù†Ø´Ø·Ø© Ø­Ø³Ø¨ Ø§Ù„Ù†ÙˆØ¹</h2>
            <div class="stats-grid" style="margin-top: 20px;">
                {% for action_name, count in activity_stats.items %}
                <div class="stat-card">
                    <div class="stat-label">{{ action_name }}</div>
                    <div class="stat-value">{{ count }}</div>
                </div>
                {% endfor %}
            </div>
        </div>
    </div>
    <script src="{% static 'js/sidebar.js' %}"></script>
    <script>
        // ØªÙØ¹ÙŠÙ„/ØªØ¹Ø·ÙŠÙ„ Ø§Ù„Ù…ÙˆØ¸Ù
        document.addEventListener('DOMContentLoaded', function() {
            const toggleButtons = document.querySelectorAll('.toggle-active-btn');
            toggleButtons.forEach(function(button) {
                button.addEventListener('click', function() {
                    const userId = this.getAttribute('data-user-id');
                    const isActive = this.getAttribute('data-is-active') === 'true';
                    const action = isActive ? 'ØªØ¹Ø·ÙŠÙ„' : 'ØªÙØ¹ÙŠÙ„';
                    
                    if (!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† ' + action + ' Ù‡Ø°Ø§ Ø§Ù„Ù…ÙˆØ¸ÙØŸ')) {
                        return;
                    }
                    
                    fetch('/api/toggle-staff-active/' + userId + '/', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                            'X-CSRFToken': '{{ csrf_token }}'
                        }
                    })
                    .then(function(response) {
                        return response.json();
                    })
                    .then(function(data) {
                        if (data.success) {
                            alert('âœ… ' + data.message);
                            window.location.reload();
                        } else {
                            alert('âŒ Ø®Ø·Ø£: ' + data.error);
                        }
                    })
                    .catch(function(error) {
                        console.error('Error:', error);
                        alert('Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„ØªØ­Ø¯ÙŠØ«');
                    });
                });
            });
            
            // Ø­Ø°Ù Ø§Ù„Ù…ÙˆØ¸Ù
            const deleteButtons = document.querySelectorAll('.delete-staff-btn');
            deleteButtons.forEach(function(button) {
                button.addEventListener('click', function() {
                    const userId = this.getAttribute('data-user-id');
                    const username = this.getAttribute('data-username');
                    
                    if (!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ø§Ù„Ù…ÙˆØ¸Ù "' + username + '"ØŸ\n\nÙ‡Ø°Ù‡ Ø§Ù„Ø¹Ù…Ù„ÙŠØ© Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ØªØ±Ø§Ø¬Ø¹ Ø¹Ù†Ù‡Ø§!')) {
                        return;
                    }
                    
                    fetch('/api/delete-staff/' + userId + '/', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                            'X-CSRFToken': '{{ csrf_token }}'
                        }
                    })
                    .then(function(response) {
                        return response.json();
                    })
                    .then(function(data) {
                        if (data.success) {
                            alert('âœ… ' + data.message);
                            window.location.reload();
                        } else {
                            alert('âŒ Ø®Ø·Ø£: ' + data.error);
                        }
                    })
                    .catch(function(error) {
                        console.error('Error:', error);
                        alert('Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø­Ø°Ù');
                    });
                });
            });
        });
        
        // Ø¥Ø¸Ù‡Ø§Ø±/Ø¥Ø®ÙØ§Ø¡ ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…ÙˆØ¸Ù
        function toggleStaffDetails(userId) {
            const detailsRow = document.querySelector('.staff-details-row[data-user-id="' + userId + '"]');
            if (!detailsRow) return;
            
            if (detailsRow.style.display === 'none' || detailsRow.style.display === '') {
                // Ø¥Ø®ÙØ§Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„ØµÙÙˆÙ Ø§Ù„Ø£Ø®Ø±Ù‰ Ø£ÙˆÙ„Ø§Ù‹
                document.querySelectorAll('.staff-details-row').forEach(function(row) {
                    row.style.display = 'none';
                });
                // Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„ØµÙ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨
                detailsRow.style.display = '';
            } else {
                detailsRow.style.display = 'none';
            }
        }
    </script>
    <script>
        // Ø¥Ø¶Ø§ÙØ© event listeners Ù„ØµÙÙˆÙ Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ†
        document.addEventListener('DOMContentLoaded', function() {
            const mainRows = document.querySelectorAll('.staff-main-row');
            
            mainRows.forEach(function(mainRow) {
                const userId = mainRow.getAttribute('data-user-id');
                
                // Ù…Ù†Ø¹ Ø§Ù„Ù†Ù‚Ø± Ø¹Ù„Ù‰ Ø§Ù„Ø£Ø²Ø±Ø§Ø± Ù…Ù† ÙØªØ­ Ø§Ù„ØªÙØ§ØµÙŠÙ„
                const buttons = mainRow.querySelectorAll('button, a');
                buttons.forEach(function(button) {
                    button.addEventListener('click', function(e) {
                        e.stopPropagation();
                    });
                });
                
                // Ø§Ù„Ù†Ù‚Ø± Ø¹Ù„Ù‰ Ø§Ù„ØµÙ Ù„ÙØªØ­/Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„ØªÙØ§ØµÙŠÙ„
                mainRow.addEventListener('click', function() {
                    toggleStaffDetails(userId);
                });
            });
        });
        
        // Ø¥Ø¸Ù‡Ø§Ø±/Ø¥Ø®ÙØ§Ø¡ ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…ÙˆØ¸Ù
        function toggleStaffDetails(userId) {
            const detailsRow = document.querySelector('.staff-details-row[data-user-id="' + userId + '"]');
            if (!detailsRow) return;
            
            if (detailsRow.style.display === 'none' || detailsRow.style.display === '') {
                // Ø¥Ø®ÙØ§Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„ØµÙÙˆÙ Ø§Ù„Ø£Ø®Ø±Ù‰ Ø£ÙˆÙ„Ø§Ù‹
                document.querySelectorAll('.staff-details-row').forEach(function(row) {
                    row.style.display = 'none';
                });
                // Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„ØµÙ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨
                detailsRow.style.display = '';
            } else {
                detailsRow.style.display = 'none';
            }
        }
    </script>
</body>
</html>

